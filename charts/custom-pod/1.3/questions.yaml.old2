rancher_min_version: 2.7.5
questions:
- variable: global.registry
  label: "Registry"
  group: "Global Settings"
  default: "aiprdkir.ai.neuca.pl"
  type: string
- variable: global.nodeSelectorEnabled
  label: "Node Selector"
  group: "Global Settings"
  default: true
  type: boolean
  show_subquestion_if: true
  subquestions:
  - variable: global.nodeSelector
    group: "Global Settings"
    label: "Node Selector"
    description: "Available values for nvidia.com/gpu.product are: NVIDIA-H100-NVL, NVIDIA-L40S"
    default:
      nvidia.com/gpu.present: "true"
      nvidia.com/gpu.product: "NVIDIA-H100-NVL"
    type: "map"
    required: true
- variable: image.repository
  label: "Image"
  group: "Image"
  default: "aiprdkir.ai.neuca.pl/library/cuda"
  required: true
  type: string
- variable: image.tag
  group: "Image"
  default: "12-2-cudnn-8.9.7"
  label: "Image tag"
  required: true
  type: string
- variable: startupScript
  label: "Startup Script"
  group: "Startu Script"
  type: "multiline"
  default: |
    mkdir -p /root/.ssh
    chmod 700 /root/.ssh
    mkdir /var/run/sshd # bug in 22.04
    /usr/sbin/sshd -De
  required: true
- variable: storage.enabled
  label: "Pod Storage"
  default: true
  type: boolean
  group: "Storage"
  show_subquestion_if: true
  subquestions:
  - variable: storage.storageSize
    label: "Storage Size"
    default: "10Gi"
    type: string
    required: true
  - variable: storage.mountPath
    default: "/data"
    label: "Mount Point"
    type: string
    required: true
  - variable: storage.storageClassName
    label: "Storage Class Name"
    default: ""
    type: string
    required: false
  - variable: storage.accessMode
    label: "Storage Access Mode"
    default: "ReadWriteMany"
    type: enum
    options:
    - "ReadWriteMany"
    - "ReadWriteOnce"
    required: true

  - variable: "storage.additionalStorage.volumes[0].enabled"
    label: "Enable Additional Storage"
    description: "Enable to add extra storage volumes."
    type: "boolean"
    group: "Storage"
    default: false
    subquestions:
    - variable: "storage.additionalStorage.volumes[0].type"
      type: "enum"
      label: "Volume Type"
      group: "Storage"
      description: "Select the type of storage volume."
      show_if: 'storage.additionalStorage.volumes[0].enabled=true'
      required: true
      options:
        - "configMap"
        - "secret"
        - "persistentVolumeClaim"
        - "emptyDir"

    - variable: "storage.additionalStorage.volumes[0].name"
      type: "string"
      group: "Storage"
      show_if: 'storage.additionalStorage.volumes[0].enabled == "true"'
      label: "Volume Name"
      description: "Unique name for this volume."
      required: true

    - variable: "storage.additionalStorage.volumes[0].objectName"
      type: "string"
      label: "The name of the object"
      show_if: storage.additionalStorage.volumes[0].enabled == true
      group: "Storage"
      description: "Unique name for this volume."
      required: true

    - variable: "storage.additionalStorage.volumes[0].mountPath"
      type: "string"
      label: "Mount Path"
      show_if: storage.additionalStorage.volumes[0].enabled == "true"
      group: "Storage"
      description: "Path inside the container where the volume should be mounted."
      required: true

    - variable: "storage.additionalStorage.volumes[0].readOnly"
      type: "boolean"
      label: "Read-Only"
      show_if: 'storage.additionalStorage.volumes[0].enabled == true'
      group: "Storage"
      description: "Mount volume as read-only."
      default: false

  
#          - variable: "storage.additionalStorage.volumes[0].configMap.name"
#            type: "string"
#            label: "ConfigMap Name"
#            description: "Enter the name of the ConfigMap."
#            show_if: 'storage.additionalStorage.volumes[0].type == "configMap"'
#
#        show_subquestions_if: 'storage.additionalStorage.volumes[0].type == "secret"'
#        subquestions:
#          - variable: "storage.additionalStorage.volumes[0].secret.secretName"
#            type: "string"
#            label: "Secret Name"
#            description: "Enter the name of the Secret."
#            show_if: "storage.additionalStorage.volumes[0].type=secret"
  


#
#      - variable: "storage.additionalStorage.volumes[0].persistentVolumeClaim.claimName"
#        type: "string"
#        label: "PVC Name"
#        description: "Enter the name of the Persistent Volume Claim."
#        show_if: "storage.additionalStorage.volumes[0].type=persistentVolumeClaim"
#
#      - variable: "storage.additionalStorage.volumes[0].emptyDir.medium"
#        type: "string"
#        label: "EmptyDir Medium"
#        description: "Specify medium for EmptyDir (leave blank for default, use 'Memory' for RAM-based storage)."
#        show_if: "storage.additionalStorage.volumes[0].type=emptyDir"
#
#      ## Now, add volumeMounts inside the same array entry
#
#
